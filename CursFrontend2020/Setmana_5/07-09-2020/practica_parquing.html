<!DOCTYPE html>
<html>
    <head>
        <title>Practica Open Data BCN</title>
        <meta name="author" content="uptivya">
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
        <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@600&family=Roboto+Mono:wght@300&display=swap" rel="stylesheet">
        <script src="https://kit.fontawesome.com/5c757390c0.js" crossorigin="anonymous"></script>
        <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
        <style>
            #resultat{
                display:flex;
                flex-flow: wrap;
            }
            .parquings{
                width:612px;
                margin:20px 0 0 20px;
                border:5px solid blanchedalmond;
                padding:20px;
                color:rgb(80, 73, 63);
                font-family: 'Roboto Mono', monospace;
                font-size: 12px;
            }
            h1{
                font-family: 'Oswald', sans-serif;
                margin-bottom: 20px;
            }
            h2{
                margin:30px 0 20px;
                font-family: 'Oswald', sans-serif;
                font-size: 20px;

            }
            p{
                
            }
            #boto{
                margin:20px 0 0 20px;
                padding:20px 30px;
                border-radius: 0;
                background-color: blanchedalmond;
                border:5px solid blanchedalmond;
                color:white;
                font-weight: 900;
                letter-spacing: 2px;
            }
            #boto:hover{
                background-color: white;
                color:rgb(80, 73, 63);
            }
            #boto:focus,#boto:active{
                outline: none;
                background-color: white;
                color:white;
                text-shadow:2px 2px 0 rgb(80, 73, 63);
                border:5px solid rgb(80, 73, 63);
            }
            
            .item-acces{
                padding-left: 30px;
                margin-bottom: 0;
                word-wrap:break-word;
            }
            .acces-id::before{
                content:"";
                height:12px;
                width:12px;
                background-color:rgb(80, 73, 63);
                display: inline-block;
                margin-bottom:-1px;
                margin-right: 12px;
                margin-left:-25px;
            }
            i{
                font-size: 40px;
                margin-right:20px;
            }
            .icones{
                margin-top:40px;
                text-align: right;
            }
            .preus{
                margin-top:20px;
            }
            .item-preu{
                display:flex;
                align-items:center;
                justify-content: flex-end;
            }
            .preu-content p{
                margin: 0;
            }
            .preu-content{
                margin-right: 20px;
            }
            

        </style>
    </head>
    <body>  
        <input type="button" value="RECOLLIR DADES DELS PÀRQUINGS" id="boto">
        <div id="resultat">
            <div class='parquings'>
                <h1>Parking code - Nom</h1>
                <p>Adreça</p>
                <div class="accessos">
                    <h2>Accessos</h2>
                    <div class="item-acces">
                        <p class="acces-id">Acces ID</p>
                        <p>Adreça</p>
                        <a>Longitud + Latitud</a>
                    </div>
                </div>
                <div class="icones">
                    <i class="fas fa-sun"></i>
                    <i class="fab fa-accessible-icon"></i>
                    <i class="fas fa-charging-station"></i>
                    <i class="fas fa-restroom"></i>
                    <i class="fas fa-arrow-alt-circle-up"></i>
                    <i class="fas fa-info-circle"></i>
                </div>
                <div class="preus">
                    <div class="item-preu">
                        <div class="preu-content">
                            <p>Preu/minut</p>
                        </div>
                        <i class="fas fa-car"></i>
                        <i class="fas fa-bus"></i>
                        <i class="fas fa-motorcycle"></i>
                    </div>    
                </div>
            </div>
        </div>
        
        https://www.google.es/maps/place/"+access_array.Longitude+","+access_array.Latitude+"/@41.99853,2.804705,17z/data=!4m5!3m4!1s0x0:0x0!8m2!3d41.998526!4d2.8068995
        
            <div class='parquings'><h1>"+parking.ParkingCode+" - "+parking.Name+"</h1><p>"+parking_array.Address+"</p><div class='accessos'><h2>Accessos</h2>
            
                "<div class='item-acces'><p class='acces-id'>"+access_array.AccessId+"</p><p>"+access_array.AccessAddress+"</p><a href='https://www.google.es/maps/place/"+access_array.Longitude+","+access_array.Latitude+"/@41.99853,2.804705,17z/data=!4m5!3m4!1s0x0:0x0!8m2!3d41.998526!4d2.8068995'>"+access_array.Longitude+","+access_array.Latitude+"</a></div></div>"

                "<div class='item-acces'><p class='acces-id'>"+access_array.AccessId+"</p><p>"+access_array.AccessAddress+"</p><a href='https://www.google.es/maps/place/"+access_array.Longitude+","+access_array.Latitude+"/@41.99853,2.804705,17z/data=!4m5!3m4!1s0x0:0x0!8m2!3d41.998526!4d2.8068995'>"+access_array.Longitude+","+access_array.Latitude+"</a></div></div>"

                

                <div class="icones">
                    <i class="fas fa-sun"></i>
                    <i class="fab fa-accessible-icon"></i>
                    <i class="fas fa-charging-station"></i>
                    <i class="fas fa-restroom"></i>
                    <i class="fas fa-arrow-alt-circle-up"></i>
                    <i class="fas fa-info-circle"></i>
                </div>
                <div class="preus">
                    <div class="item-preu">
                        <div class="preu-content">
                            <p>Preu/minut</p>
                        </div>
                        <i class="fas fa-car"></i>
                        <i class="fas fa-bus"></i>
                        <i class="fas fa-motorcycle"></i>
                    </div>    
                </div>
            </div>
        



        <script>
            $(function(){
                $("#boto").click(function(){
                    $.get("https://cors-anywhere.herokuapp.com/http://server.boka2.com/ws/parquings.json",function(data,status){
                        var i = 0;
                        var parking = data.ParkingList.Parking;
                        for(i = 0; i < parking.length; i++){
                            var parking_array = parking[i];
                            var access = parking[i].ParkingAccess.Access;
                            var a = 0;
                            $("#resultat").append("<div class='parquings'><h1>"+parking_array.ParkingCode+" - "+parking_array.Name+"</h1><p>"+parking_array.Address+"</p><div class='accessos'><h2>Accessos</h2><div class='item-acces'>");
                            for(a = 0; a < access.length; a++){
                                var access_array = access[a]
                                var direccio_enllas = "https://www.google.es/maps/place/"+access_array.Latitude+","+access_array.Longitude+"/@41.99853,2.804705,17z/data=!4m5!3m4!1s0x0:0x0!8m2!3d41.998526!4d2.8068995";
                                if (Array.isArray(access) == 1){
                                    $("#resultat").append("<div class='item-acces'><p class='acces-id'>"+access_array.AccessID+"</p><p>"+access_array.AccessAddress+"</p><a href='"+direccio_enllas+"'>"+access_array.Latitude+","+access_array.Longitude+"</a></div></div>");
                                }else{
                                    $("#resultat").append("<div class='item-acces'><p class='acces-id'>"+access.AccessID+"</p><p>"+access.AccessAddress+"</p><a href='"+direccio_enllas+"'>"+access.Latitude+","+access.Longitude+"</a></div></div>");
                                }
                            }
                            $("#resultat").append("</div>") 
                        }
                        
                    });
                });
            });
        </script>
    </body>
</html>